!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("@angular/router"),require("rxjs/add/operator/pairwise"),require("rxjs/add/operator/filter"),require("rxjs/add/operator/map"),require("rxjs/add/operator/mergeMap"),require("@angular/common")):"function"==typeof define&&define.amd?define("@firestitch/nav",["@angular/core","@angular/router","rxjs/add/operator/pairwise","rxjs/add/operator/filter","rxjs/add/operator/map","rxjs/add/operator/mergeMap","@angular/common"],e):"object"==typeof exports?exports["@firestitch/nav"]=e(require("@angular/core"),require("@angular/router"),require("rxjs/add/operator/pairwise"),require("rxjs/add/operator/filter"),require("rxjs/add/operator/map"),require("rxjs/add/operator/mergeMap"),require("@angular/common")):t["@firestitch/nav"]=e(t["@angular/core"],t["@angular/router"],t["rxjs/add/operator/pairwise"],t["rxjs/add/operator/filter"],t["rxjs/add/operator/map"],t["rxjs/add/operator/mergeMap"],t["@angular/common"])}("undefined"!=typeof self?self:this,function(t,e,r,o,n,i,a){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s="./index.ts")}({"./components/index.ts":function(t,e,r){"use strict";function o(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),o(r("./components/scroll-saver/index.ts")),o(r("./components/nav-title/index.ts"))},"./components/nav-title/index.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r("./components/nav-title/nav-title.component.ts"))},"./components/nav-title/nav-title.component.ts":function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},n=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=r("@angular/core"),a=r("./services/index.ts"),s=r("@angular/router"),c=function(){function t(t,e){this.stack=t,this.router=e}return t.prototype.ngOnInit=function(){var t=this;this.router.events.filter(function(t){return t instanceof s.NavigationEnd}).subscribe(function(){t.activeRouteInfo=t.stack.getActiveRouteInfo()})},t=o([i.Component({selector:"[fsNavTitle]",template:"{{ activeRouteInfo?.title }}"}),n("design:paramtypes",[a.FsNavRouteHandleService,s.Router])],t)}();e.FsNavTitleComponent=c},"./components/scroll-saver/index.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r("./components/scroll-saver/scroll-saver.component.ts"))},"./components/scroll-saver/scroll-saver.component.ts":function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},n=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=r("@angular/core"),a=r("@angular/router");r("rxjs/add/operator/pairwise"),r("rxjs/add/operator/filter"),r("rxjs/add/operator/map"),r("rxjs/add/operator/mergeMap");var s=r("./services/index.ts"),c=function(){function t(t,e,r){this.stack=t,this.router=e,this.activatedRoute=r,this._routeScrollPositions=[],this._subscriptions=[],this.stack.router=e}return t.prototype.ngOnInit=function(){var t=this;this._subscriptions.push(this.router.events.pairwise().subscribe(function(e){var r=e[0],o=e[1];r instanceof a.NavigationEnd&&o instanceof a.NavigationStart&&(t._routeScrollPositions[r.url]=window.pageYOffset),o instanceof a.NavigationEnd&&window.scrollTo(0,t._routeScrollPositions[o.url]||0)})),this.router.events.filter(function(t){return t instanceof a.NavigationEnd}).map(function(){return t.activatedRoute}).map(function(t){for(;t.firstChild;)t=t.firstChild;return t}).filter(function(t){return"primary"===t.outlet}).subscribe(function(e){t.stack.setActivePath(e.snapshot)}),this._subscriptions.push(this.stack.onStackReset.subscribe(function(){t._routeScrollPositions=[]}))},t.prototype.ngOnDestroy=function(){this._subscriptions.forEach(function(t){return t.unsubscribe()})},t=o([i.Component({selector:"fs-scroll-saver",template:""}),n("design:paramtypes",[s.FsNavRouteHandleService,a.Router,a.ActivatedRoute])],t)}();e.FsScrollSaverComponent=c},"./directives/index.ts":function(t,e,r){"use strict";function o(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),o(r("./directives/nav-action/index.ts")),o(r("./directives/nav-back/index.ts"))},"./directives/nav-action/index.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r("./directives/nav-action/nav-action.directive.ts"))},"./directives/nav-action/nav-action.directive.ts":function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},n=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=r("@angular/core"),a=r("./services/index.ts"),s=function(){function t(t){this._stack=t}return t.prototype.click=function(){var t=this._stack.getActiveRouteInfo();t&&t.action&&t.action()},o([i.HostListener("click",["$event"]),n("design:type",Function),n("design:paramtypes",[]),n("design:returntype",void 0)],t.prototype,"click",null),t=o([i.Directive({selector:"[fsNavAction]"}),n("design:paramtypes",[a.FsNavRouteHandleService])],t)}();e.FsNavActionDirective=s},"./directives/nav-back/index.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r("./directives/nav-back/nav-back.directive.ts"))},"./directives/nav-back/nav-back.directive.ts":function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},n=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=r("@angular/core"),a=r("@angular/router"),s=r("./services/index.ts"),c=function(){function t(t,e){this._stack=t,this._router=e}return t.prototype.click=function(){this._router.navigateByUrl(this._stack.goBack())},o([i.HostListener("click",["$event"]),n("design:type",Function),n("design:paramtypes",[]),n("design:returntype",void 0)],t.prototype,"click",null),t=o([i.Directive({selector:"[fsNavBack]"}),n("design:paramtypes",[s.FsNavRouteHandleService,a.Router])],t)}();e.FsNavBackDirective=c},"./fs-nav.module.ts":function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0});var n=r("@angular/core"),i=r("@angular/common"),a=r("./components/index.ts"),s=r("./directives/index.ts"),c=r("./services/index.ts"),u=r("./services/fs-nav-route-reuse.strategy.ts"),f=r("@angular/router"),l=function(){function t(){}return t=o([n.NgModule({imports:[i.CommonModule],exports:[a.FsScrollSaverComponent,a.FsNavTitleComponent,s.FsNavActionDirective,s.FsNavBackDirective],entryComponents:[],declarations:[a.FsScrollSaverComponent,a.FsNavTitleComponent,s.FsNavActionDirective,s.FsNavBackDirective],providers:[c.FsNavRouteHandleService,{provide:f.RouteReuseStrategy,useClass:u.FsNavRouteReuseStrategy}]})],t)}();e.FsNavModule=l},"./index.ts":function(t,e,r){"use strict";function o(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),o(r("./fs-nav.module.ts")),o(r("./components/index.ts")),o(r("./services/index.ts")),o(r("./directives/index.ts"))},"./services/fs-nav-route-handle.service.ts":function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},n=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=r("@angular/core"),a=function(){function t(){this.onStackReset=new i.EventEmitter,this.urlsStack=[],this.urlsInfo=[],this._activeRoutePath="",this._isBackNavigated=!1,this._handlers={}}return Object.defineProperty(t.prototype,"activeRoutePath",{get:function(){return this._activeRoutePath},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"router",{set:function(t){this._router=t},enumerable:!0,configurable:!0}),t.prototype.resetStack=function(){for(var t in this._handlers)this._handlers.hasOwnProperty(t)&&this.deactivateOutlet(this._handlers[t]);this._handlers={},this.urlsStack.length=0,this.urlsInfo.length=0,this._isBackNavigated=!1,this.onStackReset.next(!0)},t.prototype.getHandler=function(t){return this._handlers[t]},t.prototype.addHandler=function(t,e){if(this.urlsStack[this.urlsStack.length-1]!==t){if(this._isBackNavigated)return void(this._isBackNavigated=!1);this._handlers[t]=e,this.urlsStack.push(t)}},t.prototype.setActivePath=function(t){this._activeRoutePath=this.getFullRoutePath(t)},t.prototype.createActiveRouteInfo=function(){this.urlsInfo[this.activeRoutePath]||(this.urlsInfo[this.activeRoutePath]={})},t.prototype.setTitle=function(t){this.createActiveRouteInfo(),this.urlsInfo[this.activeRoutePath].title=t},t.prototype.setAction=function(t){this.createActiveRouteInfo(),this.urlsInfo[this.activeRoutePath].action=t},t.prototype.getActiveRouteInfo=function(){return this.createActiveRouteInfo(),this.urlsInfo[this.activeRoutePath]},t.prototype.getFullRoutePath=function(t,e){return void 0===e&&(e=""),null!==t.parent?this.getFullRoutePath(t.parent,e)+"/"+t.url.join("/"):t.url.join("/")},t.prototype.goBack=function(){return this.urlsStack[this.urlsStack.length-1]===this.activeRoutePath&&this.urlsStack.pop(),this._isBackNavigated=!0,this.urlsStack[this.urlsStack.length-1]||"/"},t.prototype.deactivateOutlet=function(t){if(null!==t){var e=t.componentRef;e&&e.destroy()}},t=o([i.Injectable(),n("design:paramtypes",[])],t)}();e.FsNavRouteHandleService=a},"./services/fs-nav-route-reuse.strategy.ts":function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},n=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(r,o){e(r,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=r("@angular/core"),s=r("./services/fs-nav-route-handle.service.ts"),c=function(){function t(t){this.resetStack=!1,this.stack=t}return t.prototype.shouldDetach=function(t){return!this.resetStack},t.prototype.store=function(t,e){var r=this.stack.getFullRoutePath(t);this.resetStack?this.resetStack&&(this.stack.resetStack(),this.resetStack=!1):this.stack.addHandler(r,e)},t.prototype.shouldAttach=function(t){if(this.resetStack)return this.stack.resetStack(),this.resetStack=!1,!1;var e=this.stack.getFullRoutePath(t);return!!this.stack.getHandler(e)},t.prototype.retrieve=function(t){var e=this.stack.getFullRoutePath(t);return this.isResetTarget(t,e)?null:this.stack.getHandler(e)},t.prototype.shouldReuseRoute=function(t,e){var r=this.stack.getFullRoutePath(e);return this.isResetTarget(e,r)&&(this.resetStack=!0),t.routeConfig===e.routeConfig},t.prototype.isResetTarget=function(t,e){return t.data&&t.data.fsNavRoot},t=o([i(0,a.Inject(s.FsNavRouteHandleService)),n("design:paramtypes",[Object])],t)}();e.FsNavRouteReuseStrategy=c},"./services/index.ts":function(t,e,r){"use strict";function o(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),o(r("./services/fs-nav-route-handle.service.ts")),o(r("./services/fs-nav-route-reuse.strategy.ts"))},"@angular/common":function(t,e){t.exports=a},"@angular/core":function(e,r){e.exports=t},"@angular/router":function(t,r){t.exports=e},"rxjs/add/operator/filter":function(t,e){t.exports=o},"rxjs/add/operator/map":function(t,e){t.exports=n},"rxjs/add/operator/mergeMap":function(t,e){t.exports=i},"rxjs/add/operator/pairwise":function(t,e){t.exports=r}})});